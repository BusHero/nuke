"use strict";(self.webpackChunknuke_website=self.webpackChunknuke_website||[]).push([[6683],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,f=u["".concat(c,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(f,s(s({ref:t},p),{},{components:n})):a.createElement(f,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},95736:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(63366),r=n(67294),o=n(91262),s=n(86010),i="controlInfo_EsNG",c=["src"],l=function(e){var t=e.src,l=(0,a.Z)(e,c);return r.createElement(o.Z,null,(function(){var e=n(55126),a=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n=a.current;e.create(t,n,l)}),[t]),r.createElement(r.Fragment,null,r.createElement("div",{ref:a}),r.createElement("div",{className:(0,s.Z)(i)},"Use ",r.createElement("kbd",null,"Space")," to pause/play, ",r.createElement("kbd",null,"\u2b05")," and ",r.createElement("kbd",null,"\u2b95")," to seek backward/forward, or ",r.createElement("kbd",null,"F")," to fullscreen."))}))}},74753:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return u}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),s=n(95736),i=["components"],c={title:"Managing Secrets"},l=void 0,p={unversionedId:"global-tool/secrets",id:"global-tool/secrets",title:"Managing Secrets",description:"Historically, secret values like passwords or auth-tokens are often saved as environment variables on local machines or CI/CD servers. This imposes both, security issues because other processes can access these environment variables and inconveniences when a build must be executed locally for emergency reasons (server downtime). NUKE has an integrated encryption utility, which can be used to save and load secret values to and from parameter files.",source:"@site/docs/06-global-tool/02-secrets.md",sourceDirName:"06-global-tool",slug:"/global-tool/secrets",permalink:"/docs/global-tool/secrets",draft:!1,editUrl:"https://github.com/nuke-build/nuke/edit/develop/website/docs/06-global-tool/02-secrets.md",tags:[],version:"current",lastUpdatedBy:"Matthias Koch",lastUpdatedAt:1656276144,formattedLastUpdatedAt:"6/26/2022",sidebarPosition:2,frontMatter:{title:"Managing Secrets"},sidebar:"tutorialSidebar",previous:{title:"Adding NuGet Packages",permalink:"/docs/global-tool/packages"},next:{title:"Navigation",permalink:"/docs/global-tool/navigation"}},d={},u=[{value:"Adding &amp; Updating Secrets",id:"adding--updating-secrets",level:2},{value:"Removing Secrets",id:"removing-secrets",level:2}],m={toc:u};function f(e){var t=e.components,c=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},m,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Historically, secret values like passwords or auth-tokens are often saved as environment variables on local machines or CI/CD servers. This imposes both, security issues because other processes can access these environment variables and inconveniences when a build must be executed locally for emergency reasons (server downtime). NUKE has an integrated encryption utility, which can be used to save and load secret values to and from ",(0,o.kt)("a",{parentName:"p",href:"/docs/fundamentals/parameters#passing-values-through-parameter-files"},"parameter files"),"."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nuke-build/nuke/blob/develop/source/Nuke.Common/Utilities/EncryptionUtility.cs"},"custom encryption utility"),' is provided "AS IS" without warranty of any kind.'),(0,o.kt)("p",{parentName:"div"},"The implementation uses your password, a static salt, 10.000 iterations, and SHA256 to generate a ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.rfc2898derivebytes"},"key-derivation function")," (",(0,o.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc2898"},"RFC2898"),"), which is then used to create a crypto-stream to encrypt and decrypt values via ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Advanced_Encryption_Standard"},"Advanced Encryption Standard (AES)"),"."),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"Please review the implementation carefully and ",(0,o.kt)("a",{parentName:"strong",href:"mailto:info@nuke.build"},"contact us")," about any possible flaws.")))),(0,o.kt)("h2",{id:"adding--updating-secrets"},"Adding & Updating Secrets"),(0,o.kt)("p",null,"You can start managing your secrets by calling:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-powershell"},"# terminal-command\nnuke :secrets [profile]\n")),(0,o.kt)("p",null,"When your parameter file does not contain secrets yet, you'll be prompted to choose a password. Otherwise, you have to provide the original password chosen."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"On macOS you can also choose to generate a password and save it to your ",(0,o.kt)("a",{parentName:"p",href:"https://support.apple.com/guide/mac-help/use-keychains-to-store-passwords-mchlf375f392/mac"},"keychain")," in order to profit from native security tooling."),(0,o.kt)("p",{style:{maxWidth:"420px",marginBottom:"-24px"}},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("img",{alt:"macOS Keychain Integration",src:n(42832).Z,width:"868",height:"358"}))))),(0,o.kt)("p",null,"Afterwards, you can choose from a list of secret parameters, to either set or update their values, and finally accept or discard your changes:"),(0,o.kt)("p",{style:{maxWidth:"700px"}},(0,o.kt)(s.Z,{src:"/casts/secrets.cast",idleTimeLimit:2,poster:"npt:4.947343",preload:!0,loop:!0,mdxType:"AsciinemaPlayer"})),(0,o.kt)("p",null,"When secrets are saved to a parameters file, they are prefixed with ",(0,o.kt)("inlineCode",{parentName:"p"},"v1:")," to indicate the underlying encryption method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title=".nuke/parameters.json"',title:'".nuke/parameters.json"'},'{\n  "$schema": "./build.schema.json",\n  "NuGetApiKey": "v1:4VDyDmFs4Pf6IX8UvosDdjOgb23g0IXs0aP/MBqOK+K6TB8JuthtPgRUrUsi9tLD"\n}\n')),(0,o.kt)("h2",{id:"removing-secrets"},"Removing Secrets"),(0,o.kt)("p",null,"If you want to delete a secret, you can simply remove it from the parameters file. In the event of a lost password, you have to remove all secrets and re-populate the parameters file via ",(0,o.kt)("inlineCode",{parentName:"p"},"nuke :secrets"),"."))}f.isMDXComponent=!0},42832:function(e,t,n){t.Z=n.p+"assets/images/secrets-macos-3af171811a35e915af8017758505fd51.webp"}}]);